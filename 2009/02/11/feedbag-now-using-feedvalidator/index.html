<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Feedbag now using feedvalidator | dm&#39;s blog</title>
  <meta name="viewport" content="width=device-width">
  <meta name="description" content="There’s a very special case that I hadn’t spotted on Feedbag. Within the different methods that Feedbag uses to discover the feed on a given URL, the very first one is lookup on a table of “known” con">
<meta property="og:type" content="article">
<meta property="og:title" content="Feedbag now using feedvalidator">
<meta property="og:url" content="http://damog.net/blog/2009/02/11/feedbag-now-using-feedvalidator/index.html">
<meta property="og:site_name" content="dm's blog">
<meta property="og:description" content="There’s a very special case that I hadn’t spotted on Feedbag. Within the different methods that Feedbag uses to discover the feed on a given URL, the very first one is lookup on a table of “known” con">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Feedbag now using feedvalidator">
<meta name="twitter:description" content="There’s a very special case that I hadn’t spotted on Feedbag. Within the different methods that Feedbag uses to discover the feed on a given URL, the very first one is lookup on a table of “known” con">
  
    <link rel="alternative" href="/atom.xml" title="dm&#39;s blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/blog/css/style.css" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  
</head>
<body>
  <div id="container">
    <div class="mobile-nav-panel">
	<i class="icon-reorder icon-large"></i>
</div>
<header id="header">
	<h1 class="blog-title">
		<a href="/blog/">dm&#39;s blog</a>
	</h1>
	<nav class="nav">
		<ul>
			<li><a href="/">Home</a></li><li><a href="/archives">Archives</a></li>
			<li><a id="nav-search-btn" class="nav-icon" title="Search"></a></li>
			<li><a href="/atom.xml" id="nav-rss-link" class="nav-icon" title="RSS Feed"></a></li>
		</ul>
	</nav>
	<div id="search-form-wrap">
		<form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="q" value="site:http://damog.net/blog"></form>
	</div>
</header>
    <div id="main">
      <article id="post-feedbag-now-using-feedvalidator" class="post">
	<footer class="entry-meta-header">
		<span class="meta-elements date">
			<a href="/blog/2009/02/11/feedbag-now-using-feedvalidator/" class="article-date">
  <time datetime="2009-02-11T22:00:53.000Z" itemprop="datePublished">Wed Feb 11, 2009</time>
</a>
		</span>
		<span class="meta-elements author">David Moreno</span>
		<div class="commentscount">
			
		</div>
	</footer>
	
	<header class="entry-header">
		
  
    <h1 class="article-title entry-title" itemprop="name">
      Feedbag now using feedvalidator
    </h1>
  

	</header>
	<div class="entry-content">
		
    	<p>There’s a very special case that I hadn’t spotted on <a href="http://axiombox.com/feedbag" target="_blank" rel="external">Feedbag</a>. Within the different methods that Feedbag uses to discover the feed on a given URL, the very first one is lookup on a table of “known” content types. If the alleged feed is served with any of the following content types, then Feedbag just returns that same URL as it assumes it’s the feed:</p>
<p><pre><code>@content_types = [<br>‘application/x.atom+xml’,<br>‘application/atom+xml’,<br>‘application/xml’,<br>‘text/xml’,<br>‘application/rss+xml’,<br>‘application/rdf+xml’,<br>]</code></pre><br>However, what happens if the feed is not served with any of those but it’s a valid feed? Well, Feedbag wouldn’t auto-discover the feed itself but would start parsing the HTML, which is time-consuming (and unneeded after all). Because of this, between the content type lookup and the HTML parsing, I’ve added W3C feed validation using the nice gem <a href="http://feedvalidator.rubyforge.org/" target="_blank" rel="external">feedvalidator</a>. However, since this would result on an extra dependency, I’ve left it as optional. If the gem is available, it’ll use it, otherwise, it won’t and will start parsing the HTML.</p>
<p>You can see the fix patch on <a href="http://github.com/damog/feedbag/commit/227434c850b6421e421a0fc54463c2e5f26cd619" target="_blank" rel="external">this commit</a>.</p>

    
	</div>
	<footer class="entry-footer">
		<div class="entry-meta-footer">
			<span class="category">
				
			</span>
			<span class="tags">
				
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/feed/">feed</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/feedbag/">feedbag</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/patch/">patch</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/w3c/">w3c</a></li></ul>

			</span>
		</div>
	</footer>
	
    
<nav id="article-nav">
  
    <a href="/blog/2009/02/11/1234567890/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Debian get-together in NYC this next 1234567890
        
      </div>
    </a>
  
  
    <a href="/blog/2009/02/09/libactive_recordbaserb2808in-attributes_with_quotes-undefined-method-each-for-truetrueclass-nomethoderror/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">
        
          lib/active_record/base.rb:2808:in `attributes_with_quotes&#39;: undefined method `each&#39; for true:TrueClass (NoMethodError)
        
      </div>
    </a>
  
</nav>

  
</article>




    </div>
    <div class="mb-search">
  <form action="//google.com/search" method="get" accept-charset="utf-8">
    <input type="search" name="q" results="0" placeholder="Search">
    <input type="hidden" name="q" value="site:damog.net/blog">
  </form>
</div>
<footer id="footer">
	<h1 class="footer-blog-title">
		<a href="/blog/">dm&#39;s blog</a>
	</h1>
	<span class="copyright">
		&copy; 2015 David Moreno<br>
		Modify from <a href="http://sanographix.github.io/tumblr/apollo/" target="_blank">Apollo</a> theme, designed by <a href="http://www.sanographix.net/" target="_blank">SANOGRAPHIX.NET</a><br>
		Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
	</span>
</footer>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


<link rel="stylesheet" href="/blog/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/blog/fancybox/jquery.fancybox.pack.js"></script>


<script src="/blog/js/script.js" type="text/javascript"></script>
  </div>
</body>
</html>